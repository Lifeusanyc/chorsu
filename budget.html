<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Moliyaviy Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center p-6">
  <h1 class="text-3xl font-bold mb-6 text-center">ðŸ“Š Moliyaviy Dashboard</h1>

  <!-- Tugmalar Paneli -->
  <div class="flex flex-wrap gap-4 mb-6">
    <button onclick="toggleSection('incomeColumn')" class="btn">Daromadni Yop/Och</button>
    <button onclick="toggleSection('expenseColumn')" class="btn">Harajatni Yop/Och</button>
    <button onclick="toggleSection('balanceColumn')" class="btn">Balansni Yop/Och</button>
    <button onclick="toggleTheme()" class="btn bg-indigo-500 text-white">Rejimni Almashtir</button>
    <button onclick="resetDashboard()" class="btn bg-red-500 text-white">Qayta Boshlash</button>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" class="grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-6xl">
    <!-- Daromad -->
    <div id="incomeColumn" class="card">
      <h2 class="title">ðŸ’° Daromad</h2>
      <ul id="incomeStats" class="stats-list"></ul>
    </div>

    <!-- Harajat -->
    <div id="expenseColumn" class="card">
      <h2 class="title">ðŸ’¸ Harajat</h2>
      <ul id="expenseStats" class="stats-list"></ul>
    </div>

    <!-- Balans -->
    <div id="balanceColumn" class="card">
      <h2 class="title">ðŸ“ˆ Balans</h2>
      <p id="balance" class="text-3xl font-bold text-green-600">Balans: $0.00</p>
    </div>
  </div>

  <div id="time" class="mt-6 text-gray-700 text-lg font-mono">Vaqt: --:--:--</div>

  <script>
    let startDate = new Date("2023-04-05T15:00:00");
    let totalIncome = 120000;
    let totalExpense = 143000;
    let targetDate = new Date("2025-04-27T00:32:00");
    let totalTime = (targetDate - startDate) / 1000;

    function updateDashboard() {
      let currentDate = new Date();
      let elapsed = (currentDate - startDate) / 1000;
      if (elapsed <= 0) return;

      let income = (totalIncome * elapsed) / totalTime;
      let expense = (totalExpense * elapsed) / totalTime;
      let balance = income - expense;

      const incomeRates = getRates(income, elapsed);
      const expenseRates = getRates(expense, elapsed);

      updateStatsList("incomeStats", incomeRates);
      updateStatsList("expenseStats", expenseRates);

      document.getElementById("balance").textContent = `Balans: $${balance.toFixed(2)}`;
      document.getElementById("balance").className =
        "text-3xl font-bold " + (balance < 0 ? "text-red-600" : "text-green-600");
      document.getElementById("time").textContent =
        "Vaqt: " + currentDate.toLocaleTimeString();
    }

    function getRates(value, time) {
      const perSecond = value / time;
      return {
        "Soniyasiga": perSecond,
        "Minutiga": perSecond * 60,
        "Soatiga": perSecond * 3600,
        "Kuniga": perSecond * 86400,
        "Haftasiga": perSecond * 86400 * 7,
        "Oyiga": perSecond * 86400 * 30,
        "Yiliga": perSecond * 86400 * 365,
        "Umumiy": value,
      };
    }

    function updateStatsList(elementId, rates) {
      const ul = document.getElementById(elementId);
      ul.innerHTML = "";
      for (let key in rates) {
        const li = document.createElement("li");
        li.textContent = `${key}: $${rates[key].toFixed(2)}`;
        li.className = "text-gray-700";
        ul.appendChild(li);
      }
    }

    function toggleSection(id) {
      const el = document.getElementById(id);
      el.classList.toggle("hidden");
    }

    function toggleTheme() {
      document.body.classList.toggle("bg-gray-100");
      document.body.classList.toggle("bg-white");
    }

    function resetDashboard() {
      location.reload();
    }

    setInterval(updateDashboard, 1000);
  </script>

  <style>
    .btn {
      @apply bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded shadow text-sm font-medium;
    }
    .card {
      @apply bg-white shadow-md rounded-xl p-6;
    }
    .title {
      @apply text-xl font-semibold mb-4;
    }
    .stats-list {
      @apply space-y-2 text-sm;
    }
  </style>
</body>
</html>
