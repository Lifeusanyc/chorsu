<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <title>Oila Byudjeti - Real Vaqtda</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #eef1f4;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      color: #333;
      margin-bottom: 10px;
    }

    .budget-box {
      background: white;
      border-radius: 12px;
      padding: 20px;
      width: 420px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      text-align: center;
      margin-bottom: 20px;
    }

    .budget-amount {
      font-size: 2.2rem;
      color: #2e8b57;
    }

    .log-box {
      width: 420px;
      max-height: 300px;
      overflow-y: auto;
      background: #fff;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    }

    .log-item {
      margin-bottom: 10px;
      font-size: 14px;
    }

    .expense {
      color: #d9534f;
    }

    .income {
      color: #5cb85c;
    }
  </style>
</head>
<body>

  <h1>Oila Byudjeti</h1>

  <div class="budget-box">
    <div>Hozirgi balans:</div>
    <div class="budget-amount" id="budget">$15000</div>
  </div>

  <div class="log-box" id="logBox"></div>

  <script>
    let budget = 15000;
    const budgetDisplay = document.getElementById('budget');
    const logBox = document.getElementById('logBox');

    const expenses = {
      "Rent": 56686,
      "Uber": 142,
      "Food": 23639,
      "Home": 6809,
      "Private": 13097,
      "Doc": 10445,
      "Tel": 1950,
      "Car": 30262,
      "Metro": 376
    };

    const incomes = {
      "SALARY": 67748,
      "CASHBACK": 749,
      "BONUS": 4960,
      "INSTACART": 292,
      "JURNY": 40438,
      "LYFT": 0,
      "UBER": 1553,
      "CURB": 831,
      "ABIX": 3412
    };

    const totalExpense = Object.values(expenses).reduce((a, b) => a + b, 0);
    const totalIncome = Object.values(incomes).reduce((a, b) => a + b, 0);

    const seconds = 751;
    const expensePerSecond = totalExpense / seconds;
    const incomePerSecond = totalIncome / seconds;

    function updateBudgetDisplay() {
      budgetDisplay.textContent = `$${budget.toFixed(2)}`;
    }

    function addLogItem(type, name, amount) {
      const div = document.createElement('div');
      div.className = `log-item ${type}`;
      const sign = type === 'income' ? '+' : '-';
      div.textContent = `${new Date().toLocaleTimeString()} | ${name}: ${sign}$${amount.toFixed(2)}`;
      logBox.prepend(div);
    }

    function getRandomKey(obj) {
      const keys = Object.keys(obj);
      return keys[Math.floor(Math.random() * keys.length)];
    }

    setInterval(() => {
      // Harajat
      const expenseName = getRandomKey(expenses);
      budget -= expensePerSecond;
      if (budget < 0) budget = 0;
      updateBudgetDisplay();
      addLogItem('expense', expenseName, expensePerSecond);

      // Kirim
      const incomeName = getRandomKey(incomes);
      budget += incomePerSecond;
      updateBudgetDisplay();
      addLogItem('income', incomeName, incomePerSecond);
    }, 1000); // Har soniyada yangilanish

    updateBudgetDisplay();
  </script>
</body>
</html>
