<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <title>Oila Byudjeti - 571 soniya</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f2f5;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      margin-bottom: 10px;
      color: #333;
    }

    .budget-box {
      background: #fff;
      padding: 20px;
      width: 500px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      text-align: center;
    }

    .budget-amount {
      font-size: 2.2rem;
      color: #2e8b57;
    }

    .section {
      width: 500px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      padding: 15px;
      margin-bottom: 20px;
    }

    .section h2 {
      margin-bottom: 10px;
      font-size: 18px;
      border-bottom: 1px solid #ddd;
      padding-bottom: 5px;
    }

    .item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
      font-size: 14px;
    }

    .expense { color: #d9534f; }
    .income { color: #5cb85c; }

    .slider-container {
      margin-bottom: 20px;
      width: 500px;
      background: #fff;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    input[type="range"] {
      width: 100%;
    }

    label {
      font-size: 14px;
      display: block;
      margin-bottom: 6px;
    }
  </style>
</head>
<body>

  <h1>Oila Byudjeti (571 soniya)</h1>

  <div class="budget-box">
    <div>Balans:</div>
    <div class="budget-amount" id="budget">$15000.00</div>
  </div>

  <div class="slider-container">
    <label for="speed">‚è© Tezlik: <span id="speedValue">1x</span></label>
    <input type="range" id="speed" min="1" max="10" value="1" />
  </div>

  <div class="section">
    <h2>üí∏ Harajatlar</h2>
    <div id="expenses"></div>
  </div>

  <div class="section">
    <h2>üí∞ Kirimlar</h2>
    <div id="incomes"></div>
  </div>

  <script>
    const totalSeconds = 571;
    let budget = 15000;
    let elapsed = 0;
    let speedMultiplier = 1;

    const expenseData = {
      "Rent": 56686,
      "Uber": 142,
      "Food": 23639,
      "Home": 6809,
      "Private": 13097,
      "Doc": 10445,
      "Tel": 1950,
      "Car": 30262,
      "Metro": 376
    };

    const incomeData = {
      "SALARY": 67748,
      "CASHBACK": 749,
      "BONUS": 4960,
      "INSTACART": 292,
      "JURNY": 40438,
      "LYFT": 0,
      "UBER": 1553,
      "CURB": 831,
      "ABIX": 3412
    };

    const expenseState = {};
    const incomeState = {};

    for (let key in expenseData) {
      expenseState[key] = { total: expenseData[key], current: 0, perSecond: expenseData[key] / totalSeconds };
    }

    for (let key in incomeData) {
      incomeState[key] = { total: incomeData[key], current: 0, perSecond: incomeData[key] / totalSeconds };
    }

    const budgetDisplay = document.getElementById("budget");
    const expenseContainer = document.getElementById("expenses");
    const incomeContainer = document.getElementById("incomes");
    const speedSlider = document.getElementById("speed");
    const speedValue = document.getElementById("speedValue");

    speedSlider.addEventListener("input", () => {
      speedMultiplier = parseInt(speedSlider.value);
      speedValue.textContent = speedMultiplier + "x";
    });

    function render() {
      expenseContainer.innerHTML = '';
      incomeContainer.innerHTML = '';

      let totalExpense = 0;
      let totalIncome = 0;

      for (let key in expenseState) {
        const val = expenseState[key];
        val.current = Math.min(val.current + val.perSecond * speedMultiplier, val.total);
        totalExpense += val.current;
        expenseContainer.innerHTML += `<div class="item expense"><span>${key}</span><span>-$${val.current.toFixed(2)}</span></div>`;
      }

      for (let key in incomeState) {
        const val = incomeState[key];
        val.current = Math.min(val.current + val.perSecond * speedMultiplier, val.total);
        totalIncome += val.current;
        incomeContainer.innerHTML += `<div class="item income"><span>${key}</span><span>+$${val.current.toFixed(2)}</span></div>`;
      }

      budget = 15000 + totalIncome - totalExpense;
      budgetDisplay.textContent = `$${budget.toFixed(2)}`;
    }

    render();
    const interval = setInterval(() => {
      elapsed += speedMultiplier;
      if (elapsed >= totalSeconds) {
        clearInterval(interval);
        render(); // final render
        return;
      }
      render();
    }, 1000);
  </script>
</body>
</html>
